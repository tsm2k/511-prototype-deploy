(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{6840:(e,t,s)=>{Promise.resolve().then(s.bind(s,288))},288:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>eG});var a=s(5155);s(8413);var n=s(2115),l=s(8197),i=s(9136),r=s(1476),c=s(8236),d=s(3467),o=s(2317),m=s(1027),f=s(3463),h=s(9795);function u(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,h.QP)((0,f.$)(t))}let x=(0,m.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),g=n.forwardRef((e,t)=>{let{className:s,variant:n,size:l,asChild:i=!1,...r}=e,c=i?o.DX:"button";return(0,a.jsx)(c,{className:u(x({variant:n,size:l,className:s})),ref:t,...r})});function p(e){let{activeView:t,onViewChange:s}=e,n=[{id:"map",label:"Map View",icon:l.A},{id:"chart",label:"Chart View",icon:i.A},{id:"data",label:"Data Catalog",icon:r.A},{id:"settings",label:"Settings",icon:c.A},{id:"guide",label:"Guide",icon:d.A}];return(0,a.jsx)("div",{className:"flex bg-black text-white h-14 w-full",children:(0,a.jsx)("div",{className:"container mx-auto px-4",children:(0,a.jsxs)("div",{className:"flex items-center h-full",children:[(0,a.jsx)("div",{className:"mr-6",children:(0,a.jsx)("h1",{className:"text-xl font-bold",children:"511 Data Analysis"})}),(0,a.jsx)("div",{className:"flex space-x-1",children:n.map(e=>(0,a.jsxs)(g,{variant:t===e.id?"secondary":"ghost",className:u("text-white hover:bg-zinc-800",t===e.id&&"bg-zinc-800"),onClick:()=>s(e.id),children:[(0,a.jsx)(e.icon,{className:"h-5 w-5 mr-2"}),(0,a.jsx)("span",{children:e.label})]},e.id))})]})})})}g.displayName="Button";var v=s(3473),j=s(1902),N=s(1719),y=s(8867),b=s(5686),w=s(7223),k=s(2423),A=s(1594),S=s(1773);let _=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:u("rounded-lg border bg-card text-card-foreground shadow-sm",s),...n})});_.displayName="Card";let L=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:u("flex flex-col space-y-1.5 p-6",s),...n})});L.displayName="CardHeader";let C=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:u("text-2xl font-semibold leading-none tracking-tight",s),...n})});C.displayName="CardTitle",n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:u("text-sm text-muted-foreground",s),...n})}).displayName="CardDescription";let E=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:u("p-6 pt-0",s),...n})});E.displayName="CardContent",n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:u("flex items-center p-6 pt-0",s),...n})}).displayName="CardFooter";var R=s(8217);let T=R.bL,D=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(R.B8,{ref:t,className:u("inline-flex items-center justify-start gap-2 rounded-lg p-1",s),...n})});D.displayName=R.B8.displayName;let I=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(R.l9,{ref:t,className:u("inline-flex items-center justify-center whitespace-nowrap rounded-lg px-4 py-2 text-sm font-medium ring-offset-background transition-all hover:bg-muted/50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-primary data-[state=active]:text-primary-foreground data-[state=active]:border-primary border-2",s),...n})});I.displayName=R.l9.displayName;let B=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(R.UC,{ref:t,className:u("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...n})});B.displayName=R.UC.displayName;var F=s(6195);let O=(0,m.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),M=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(F.b,{ref:t,className:u(O(),s),...n})});M.displayName=F.b.displayName;var P=s(3301);let z=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsxs)(P.bL,{ref:t,className:u("relative flex w-full touch-none select-none items-center",s),...n,children:[(0,a.jsx)(P.CC,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:(0,a.jsx)(P.Q6,{className:"absolute h-full bg-primary"})}),(0,a.jsx)(P.zi,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]})});z.displayName=P.bL.displayName;var H=s(6352);let U=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(H.bL,{ref:t,className:u("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s),...n,children:(0,a.jsx)(H.C1,{className:u("flex items-center justify-center text-current"),children:(0,a.jsx)(y.A,{className:"h-4 w-4"})})})});U.displayName=H.bL.displayName;let V=n.forwardRef((e,t)=>{let{className:s,type:n,...l}=e;return(0,a.jsx)("input",{type:n,className:u("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...l})});V.displayName="Input";let W=(0,m.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Y(e){let{className:t,variant:s,...n}=e;return(0,a.jsx)("div",{className:u(W({variant:s}),t),...n})}var G=s(872),J=s(3565);let Z=["I-265","I-275","I-465","I-469","I-64","I-65","I-69","I-70","I-74","I-80","I-80 Illinois","I-865","I-94","IN 1","IN 10","IN 114","IN 13","IN 135","IN 15","IN 161","IN 2","IN 213","IN 235","IN 236","IN 250","IN 252","IN 256","IN 32","IN 327","IN 337","IN 37","IN 38","IN 39","IN 42","IN 44","IN 45","IN 450","IN 46","IN 56","IN 57","IN 61","IN 62","IN 63","IN 66","IN 67","IN 7","IN 70","US 150","US 20","US 231","US 24","US 27","US 30","US 31","US 35","US 40","US 41","US 421","US 50","US 52","US 6"],K=["Anderson","Auburn","Bedford","Beech Grove","Bloomington","Boonville","Brownsburg","Burns Harbor","Carlisle","Carmel","Clarksville","Clear Creek","Cloverdale","Columbus","Crawfordsville","Crown Point","Evansville","Fishers","Fort Wayne","Franklin","Gary","Gas City","Greenfield","Greensburg","Greens Fork","Greenwood","Grissom AFB","Hammond","Henryville","Hobart","Huntington","Indianapolis","Ingalls","Jeffersonville","Kokomo","Lake Station","Lawrence","Lebanon","Louisville","Martinsville","Medora","Memphis","Merrillville","Middlebury","Mooresville","Munster","New Albany","Noblesville","Orland","Orleans","Paoli","Pendleton","Pipe Creek","Plainfield","Plymouth","Portage","Porter","Remington","Roselawn","Scottsburg","Sellersburg","Shelbyville","Speedway","Spiceland","Taylorsville","Tecumseh","Terre Haute","Versailles","Wabash","Westfield","Whiteland","Whitestown","Wolcott","Zionsville"],X=["CRAWFORDSVILLE","FORT WAYNE","GREENFIELD","LAPORTE","SEYMOUR","VINCENNES"];function q(e){let{selectedRoads:t,onSelectedRoadsChange:s,setSelectedRoads:l,selectedLocations:i,onSelectedLocationsChange:r,setSelectedLocations:c,selectedDistricts:d,onSelectedDistrictsChange:o,setSelectedDistricts:m}=e,[f,h]=(0,n.useState)(10),[u,x]=(0,n.useState)([0,100]),[p,v]=(0,n.useState)(null),[j,N]=(0,n.useState)(""),[y,b]=(0,n.useState)(""),[w,k]=(0,n.useState)(""),A=Z.filter(e=>e.toLowerCase().includes(j.toLowerCase())),S=K.filter(e=>e.toLowerCase().includes(y.toLowerCase())),_=X.filter(e=>e.toLowerCase().includes(w.toLowerCase()));return(0,a.jsxs)(T,{defaultValue:"road",className:"w-full",children:[(0,a.jsxs)(D,{className:"flex flex-wrap gap-2 mb-4 bg-transparent p-0",children:[(0,a.jsx)(I,{value:"road",className:"bg-white hover:bg-gray-50 data-[state=active]:bg-blue-100 data-[state=active]:text-blue-900 data-[state=active]:border-blue-500 shadow-sm border-2 border-gray-300",children:"Road"}),(0,a.jsx)(I,{value:"city",className:"bg-white hover:bg-gray-50 data-[state=active]:bg-blue-100 data-[state=active]:text-blue-900 data-[state=active]:border-blue-500 shadow-sm border-2 border-gray-300",children:"City"}),(0,a.jsx)(I,{value:"districts",className:"bg-white hover:bg-gray-50 data-[state=active]:bg-blue-100 data-[state=active]:text-blue-900 data-[state=active]:border-blue-500 shadow-sm border-2 border-gray-300",children:"Districts"}),(0,a.jsx)(I,{value:"draw",className:"bg-white hover:bg-gray-50 data-[state=active]:bg-blue-100 data-[state=active]:text-blue-900 data-[state=active]:border-blue-500 shadow-sm border-2 border-gray-300",children:"Draw"})]}),(0,a.jsx)(B,{value:"road",className:"space-y-4",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(V,{placeholder:"Search roads...",value:j,onChange:e=>N(e.target.value),className:"flex-1"}),(0,a.jsx)(g,{variant:"outline",onClick:()=>{let e=t.length===Z.length?[]:[...Z];s?null==s||s(e):l&&(null==l||l(e))},size:"sm",children:t.length===Z.length?"Deselect All":"Select All"})]}),(0,a.jsx)("div",{className:"max-h-60 overflow-y-auto border rounded-md p-2 grid grid-cols-2 gap-2",children:A.map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-2 py-1",children:[(0,a.jsx)(U,{id:"road-".concat(e),checked:t.includes(e),onCheckedChange:a=>{let n=a?[...t,e]:t.filter(t=>t!==e);s?s(n):l&&(null==l||l(n))}}),(0,a.jsx)(M,{htmlFor:"road-".concat(e),children:e})]},e))}),t.length>0&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(M,{children:"Mile Marker Range (Not Functional)"}),(0,a.jsxs)("div",{className:"bg-gray-100 text-gray-800 text-xs font-medium px-2 py-1 rounded-md",children:[u[0]," - ",u[1]]})]}),(0,a.jsxs)("div",{id:"slider-container",className:"relative pt-2 pb-2",children:[(0,a.jsx)("div",{className:"h-2 w-full bg-gray-200 rounded-full relative",children:(0,a.jsx)("div",{className:"absolute h-full bg-black rounded-full",style:{left:"".concat(u[0],"%"),width:"".concat(u[1]-u[0],"%")}})}),(0,a.jsx)("div",{className:"absolute top-0 -mt-1 -ml-2.5 h-5 w-5 rounded-full border-2 border-black bg-white cursor-pointer shadow-md hover:scale-110 transition-transform",style:{left:"".concat(u[0],"%")},onMouseDown:e=>{e.preventDefault();let t=document.getElementById("slider-container");if(!t)return;let s=t.getBoundingClientRect(),a=e=>{let t=Math.max(0,Math.min(100,(e.clientX-s.left)/s.width*100));t<u[1]&&x([Math.round(t),u[1]])},n=()=>{document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",n)};document.addEventListener("mousemove",a),document.addEventListener("mouseup",n)}}),(0,a.jsx)("div",{className:"absolute top-0 -mt-1 -ml-2.5 h-5 w-5 rounded-full border-2 border-black bg-white cursor-pointer shadow-md hover:scale-110 transition-transform",style:{left:"".concat(u[1],"%")},onMouseDown:e=>{e.preventDefault();let t=document.getElementById("slider-container");if(!t)return;let s=t.getBoundingClientRect(),a=e=>{let t=Math.max(0,Math.min(100,(e.clientX-s.left)/s.width*100));t>u[0]&&x([u[0],Math.round(t)])},n=()=>{document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",n)};document.addEventListener("mousemove",a),document.addEventListener("mouseup",n)}})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)("input",{type:"number",value:u[0],min:0,max:u[1]-1,onChange:e=>{x([Math.max(0,Math.min(u[1]-1,parseInt(e.target.value)||0)),u[1]])},className:"w-full px-3 py-2 border border-gray-300 rounded-md text-center text-sm focus:outline-none focus:ring-2 focus:ring-gray-800 focus:border-gray-800"})}),(0,a.jsx)("div",{className:"text-gray-400",children:"â€”"}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)("input",{type:"number",value:u[1],min:u[0]+1,max:100,onChange:e=>{let t=Math.max(u[0]+1,Math.min(100,parseInt(e.target.value)||0));x([u[0],t])},className:"w-full px-3 py-2 border border-gray-300 rounded-md text-center text-sm focus:outline-none focus:ring-2 focus:ring-gray-800 focus:border-gray-800"})})]})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1 mt-2",children:t.map(e=>(0,a.jsx)(Y,{variant:"secondary",className:"text-xs",children:e},e))})]})}),(0,a.jsx)(B,{value:"city",className:"space-y-4",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(V,{placeholder:"Search locations...",value:y,onChange:e=>b(e.target.value),className:"flex-1"}),(0,a.jsx)(g,{variant:"outline",onClick:()=>{let e=i.length===K.length?[]:[...K];r?null==r||r(e):c&&(null==c||c(e))},size:"sm",children:i.length===K.length?"Deselect All":"Select All"})]}),(0,a.jsx)("div",{className:"max-h-60 overflow-y-auto border rounded-md p-2 grid grid-cols-2 gap-2",children:S.map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-2 py-1",children:[(0,a.jsx)(U,{id:"location-".concat(e),checked:i.includes(e),onCheckedChange:t=>{t?null==c||c([...i,e]):null==c||c(i.filter(t=>t!==e))}}),(0,a.jsx)(M,{htmlFor:"location-".concat(e),children:e})]},e))}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(M,{children:["Radius (miles) (Not Functional): ",f]}),(0,a.jsx)(z,{value:[f],min:1,max:50,step:1,onValueChange:e=>{let[t]=e;return h(t)}})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1 mt-2",children:i.map(e=>(0,a.jsxs)(Y,{variant:"secondary",className:"text-xs",children:[e," (",f," mi)"]},e))})]})}),(0,a.jsx)(B,{value:"districts",className:"space-y-4",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(V,{placeholder:"Search districts...",value:w,onChange:e=>k(e.target.value),className:"flex-1"}),(0,a.jsx)(g,{variant:"outline",onClick:()=>{let e=d.length===X.length?[]:[...X];o?o(e):m&&(null==m||m(e))},size:"sm",children:d.length===X.length?"Deselect All":"Select All"})]}),(0,a.jsx)("div",{className:"max-h-60 overflow-y-auto border rounded-md p-2",children:_.map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-2 py-1",children:[(0,a.jsx)(U,{id:"district-".concat(e),checked:d.includes(e),onCheckedChange:t=>{t?null==m||m([...d,e]):null==m||m(d.filter(t=>t!==e))}}),(0,a.jsx)(M,{htmlFor:"district-".concat(e),children:e})]},e))}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1 mt-2",children:d.map(e=>(0,a.jsx)(Y,{variant:"secondary",className:"text-xs",children:e},e))})]})}),(0,a.jsxs)(B,{value:"draw",className:"space-y-4",children:[(0,a.jsx)("div",{className:"p-3 bg-amber-50 border border-amber-200 rounded-md mb-4",children:(0,a.jsx)("p",{className:"text-amber-800 text-sm",children:"Note: The draw functionality is not yet implemented. This feature will be available in a future update."})}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(g,{variant:"polygon"===p?"default":"outline",onClick:()=>v("polygon"),className:"flex-1",children:[(0,a.jsx)(G.A,{className:"mr-2 h-4 w-4"}),"Draw Polygon"]}),(0,a.jsxs)(g,{variant:"circle"===p?"default":"outline",onClick:()=>v("circle"),className:"flex-1",children:[(0,a.jsx)(J.A,{className:"mr-2 h-4 w-4"}),"Draw Circle"]})]}),(0,a.jsx)("div",{className:"border rounded-md p-4 h-40 flex items-center justify-center bg-muted/50",children:p?(0,a.jsxs)("p",{className:"text-center text-muted-foreground",children:["Click on the map to start drawing a ",p]}):(0,a.jsx)("p",{className:"text-center text-muted-foreground",children:"Select a drawing mode above"})})]})]})}let Q=["January","February","March","April","May","June","July","August","September","October","November","December"],$=new Date().getFullYear(),ee=Array.from({length:4},(e,t)=>String($-1+t)),et=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],es=[{name:"New Year's Day",date:"2024-01-01"},{name:"Martin Luther King Jr. Day",date:"2024-01-15"},{name:"Presidents' Day",date:"2024-02-19"},{name:"Memorial Day",date:"2024-05-27"},{name:"Independence Day",date:"2024-07-04"},{name:"Labor Day",date:"2024-09-02"},{name:"Columbus Day",date:"2024-10-14"},{name:"Veterans Day",date:"2024-11-11"},{name:"Thanksgiving Day",date:"2024-11-28"},{name:"Christmas Day",date:"2024-12-25"}];function ea(e){let{selectedTimeframe:t,onSelectedTimeframeChange:s,setSelectedTimeframe:l}=e,i=e=>{s?s(e):l&&l(e)},[r,c]=(0,n.useState)("calendar"),[d,o]=(0,n.useState)({calendar:t,monthRanges:t?[t]:[],dayRanges:t?[t]:[],holidays:t?[t]:[]}),[m,f]=(0,n.useState)({from:t?new Date(t.start):void 0,to:t?new Date(t.end):void 0}),[h,u]=(0,n.useState)(()=>{if(!t)return{months:[],years:[]};let e=new Set,s=new Set,a=new Date(t.start),n=new Date(t.end);for(;a<=n;){let t=a.getFullYear().toString();ee.includes(t)&&(s.add(t),e.add(Q[a.getMonth()])),a.setMonth(a.getMonth()+1)}return{months:Array.from(e).sort((e,t)=>Q.indexOf(e)-Q.indexOf(t)),years:Array.from(s).sort()}}),[x,p]=(0,n.useState)(()=>{if(!t)return[];let e=new Set,s=new Date(t.start),a=new Date(t.end);for(;s<=a;)e.add(et[s.getDay()]),s.setDate(s.getDate()+1);return Array.from(e)}),[v,j]=(0,n.useState)(()=>{if(!t)return[];let e=new Date(t.start),s=new Date(t.end);return es.filter(t=>{let a=new Date(t.date);return a>=e&&a<=s}).map(e=>e.name)});(0,n.useEffect)(()=>{if(t){let e=new Date(t.start),s=new Date(t.end);f({from:e,to:s});let a=new Set,n=new Set,l=new Date(e);for(;l<=s;){let e=l.getFullYear().toString();ee.includes(e)&&(n.add(e),a.add(Q[l.getMonth()])),l.setMonth(l.getMonth()+1)}u({months:Array.from(a).sort((e,t)=>Q.indexOf(e)-Q.indexOf(t)),years:Array.from(n).sort()});let i=new Set;for(l=new Date(e);l<=s;)i.add(et[l.getDay()]),l.setDate(l.getDate()+1);p(Array.from(i)),j(es.filter(t=>{let a=new Date(t.date);return a>=e&&a<=s}).map(e=>e.name)),o({calendar:t,monthRanges:[t],dayRanges:[t],holidays:[t]})}},[t]),(0,n.useEffect)(()=>{if(m.from&&m.to){let e=m.from.toISOString().split("T")[0],t=m.to.toISOString().split("T")[0];o(s=>({...s,calendar:{start:e,end:t}}))}else o(e=>({...e,calendar:null}))},[m]),(0,n.useEffect)(()=>{if(h.months.length>0&&h.years.length>0){let e=[];for(let t of h.years.sort())for(let s of h.months.sort((e,t)=>Q.indexOf(e)-Q.indexOf(t))){let a=Q.indexOf(s),n=new Date(Number(t),a,1),l=new Date(Number(t),a+1,0);e.push({start:n.toISOString().split("T")[0],end:l.toISOString().split("T")[0]})}o(t=>({...t,monthRanges:e}))}},[h]),(0,n.useEffect)(()=>{if(v.length>0){let e=es.filter(e=>v.includes(e.name)).map(e=>({start:e.date,end:e.date}));o(t=>({...t,holidays:e}))}},[v]),(0,n.useEffect)(()=>{if(x.length>0){let e=[],t=new Date($,0,1),s=new Date($,11,31),a=new Date(t);for(;a<=s;){let t=et[a.getDay()];x.includes(t)&&e.push({start:a.toISOString().split("T")[0],end:a.toISOString().split("T")[0]}),a.setDate(a.getDate()+1)}o(t=>({...t,dayRanges:e}))}},[x]);let N=(e,t)=>{let s=[];if(e.length>0&&t.length>0){for(let a of t.filter(e=>t.includes(e)).sort())for(let t of e){let n=e.findIndex(e=>e===t);if(-1!==n){let e=new Date(Number(a),n,1),t=new Date(Number(a),n+1,0);s.push({start:e.toISOString().split("T")[0],end:t.toISOString().split("T")[0]})}}s.sort((e,t)=>e.start.localeCompare(t.start))}o(e=>({...e,monthRanges:s})),i(s.length>0?s[0]:null)},y=e=>{u(t=>{let s=t.months.includes(e)?t.months.filter(t=>t!==e):[...t.months,e].sort((e,t)=>Q.indexOf(e)-Q.indexOf(t)),a={...t,months:s};return N(a.months,a.years),a})},b=e=>{ee.includes(e)&&u(t=>{let s=t.years.includes(e)?t.years.filter(t=>t!==e):[...t.years,e].sort((e,t)=>Number(e)-Number(t)),a={...t,years:s};return N(a.months,a.years),a})},w=e=>{let t=v.includes(e)?v.filter(t=>t!==e):[...v,e],s=t.length>0?es.filter(e=>t.includes(e.name)).map(e=>({start:e.date,end:e.date})):[];j(t),o(e=>({...e,holidays:s})),i(s.length>0?s[0]:null)},k=e=>{p(t=>{let s=t.includes(e)?t.filter(t=>t!==e):[...t,e].sort((e,t)=>et.indexOf(e)-et.indexOf(t)),a=[];if(s.length>0){let e=new Date($,0,1),t=new Date($,11,31),n=new Date(e);for(;n<=t;){let e=et[n.getDay()];s.includes(e)&&a.push({start:n.toISOString().split("T")[0],end:n.toISOString().split("T")[0]}),n.setDate(n.getDate()+1)}}return null==o||o(e=>({...e,dayRanges:a})),i(a.length>0?a[0]:null),s})};return(0,a.jsxs)(T,{value:r,onValueChange:e=>c(e),className:"w-full",children:[(0,a.jsxs)(D,{className:"flex flex-wrap gap-2 mb-4 bg-transparent p-0",children:[(0,a.jsx)(I,{value:"calendar",className:"bg-white hover:bg-gray-50 data-[state=active]:bg-blue-100 data-[state=active]:text-blue-900 data-[state=active]:border-blue-500 shadow-sm border-2 border-gray-300",children:"Date Picker"}),(0,a.jsx)(I,{value:"dateRange",className:"bg-white hover:bg-gray-50 data-[state=active]:bg-blue-100 data-[state=active]:text-blue-900 data-[state=active]:border-blue-500 shadow-sm border-2 border-gray-300",children:"Date Range"}),(0,a.jsx)(I,{value:"holidays",className:"bg-white hover:bg-gray-50 data-[state=active]:bg-blue-100 data-[state=active]:text-blue-900 data-[state=active]:border-blue-500 shadow-sm border-2 border-gray-300",children:"Holidays"})]}),(0,a.jsx)(B,{value:"calendar",className:"space-y-4",children:(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,a.jsxs)("div",{className:"flex space-x-4",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)(M,{htmlFor:"start-date",className:"text-sm font-medium",children:"Start Date"}),(0,a.jsx)("input",{type:"date",id:"start-date",value:m.from?m.from.toISOString().split("T")[0]:"",onChange:e=>{let t=e.target.value?new Date(e.target.value):void 0;if(null==f||f(e=>({...e,from:t})),t&&m.to){let e={start:t.toISOString().split("T")[0],end:m.to.toISOString().split("T")[0]};null==o||o(t=>({...t,calendar:e})),i(e)}},className:"border rounded-md p-2"})]}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)(M,{htmlFor:"end-date",className:"text-sm font-medium",children:"End Date"}),(0,a.jsx)("input",{type:"date",id:"end-date",value:m.to?m.to.toISOString().split("T")[0]:"",onChange:e=>{let t=e.target.value?new Date(e.target.value):void 0;if(null==f||f(e=>({...e,to:t})),m.from&&t){let e={start:m.from.toISOString().split("T")[0],end:t.toISOString().split("T")[0]};null==o||o(t=>({...t,calendar:e})),i(e)}},className:"border rounded-md p-2"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"Selected Range:"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:d.calendar&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(Y,{variant:"outline",children:["From: ",d.calendar.start]}),(0,a.jsxs)(Y,{variant:"outline",children:["To: ",d.calendar.end]})]})})]})]})})}),(0,a.jsx)(B,{value:"dateRange",className:"mt-2",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"p-2 bg-red-50 border border-red-200 rounded-md",children:(0,a.jsx)("p",{className:"text-xs text-red-600 font-medium",children:"Note: This functionality is currently untested"})}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h4",{className:"font-medium",children:"Date Range Selection"}),(0,a.jsxs)("div",{className:"space-x-2",children:[(0,a.jsx)(g,{variant:"outline",size:"sm",onClick:()=>{u({months:[],years:[]}),null==p||p([]),null==o||o(e=>({...e,monthRanges:[],dayRanges:[]})),null==l||l(null)},children:"Clear All"}),(0,a.jsx)(g,{variant:"outline",size:"sm",onClick:()=>{let e={months:[...Q],years:[...ee],days:[...et]};u(e),p(e.days);let t=[];for(let e of ee)for(let s of Q){let a=Q.findIndex(e=>e===s);if(-1!==a){let s=new Date(Number(e),a,1),n=new Date(Number(e),a+1,0);t.push({start:s.toISOString().split("T")[0],end:n.toISOString().split("T")[0]})}}t.sort((e,t)=>e.start.localeCompare(t.start)),null==o||o(e=>({...e,monthRanges:t,dayRanges:t})),null==l||l(t.length>0?t[0]:null)},children:"Select All"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h4",{className:"text-sm font-medium",children:"Years"}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground",children:[h.years.length," selected"]})]}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2 p-4 border rounded-lg bg-white",children:ee.map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-2 min-w-0",children:[(0,a.jsx)(U,{id:"year-".concat(e),checked:h.years.includes(e),onCheckedChange:()=>b(e),className:"shrink-0"}),(0,a.jsx)(M,{htmlFor:"year-".concat(e),className:"text-sm",children:e})]},e))})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h4",{className:"text-sm font-medium",children:"Months"}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground",children:[h.months.length," selected"]})]}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2 p-4 border rounded-lg bg-white",children:Q.map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-2 min-w-0",children:[(0,a.jsx)(U,{id:"month-".concat(e),checked:h.months.includes(e),onCheckedChange:()=>y(e),className:"shrink-0"}),(0,a.jsx)(M,{htmlFor:"month-".concat(e),className:"text-sm truncate",children:e})]},e))})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h4",{className:"text-sm font-medium",children:"Days of Week"}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground",children:[x.length," selected"]})]}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2 p-4 border rounded-lg bg-white",children:et.map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-2 min-w-0",children:[(0,a.jsx)(U,{id:"day-".concat(e),checked:x.includes(e),onCheckedChange:()=>k(e),className:"shrink-0"}),(0,a.jsx)(M,{htmlFor:"day-".concat(e),className:"text-sm",children:e})]},e))})]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("h4",{className:"text-sm font-medium mb-2",children:"Selected Ranges"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2 p-4 border rounded-lg bg-white min-h-[60px]",children:0===h.months.length&&0===h.years.length&&0===x.length?(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"No selections made"}):(0,a.jsxs)(a.Fragment,{children:[h.years.sort().map(e=>h.months.sort((e,t)=>Q.indexOf(e)-Q.indexOf(t)).map(t=>(0,a.jsxs)(Y,{variant:"secondary",className:"text-xs bg-blue-50 text-blue-700 hover:bg-blue-100",children:[t," ",e]},"".concat(e,"-").concat(t)))),x.map(e=>(0,a.jsx)(Y,{variant:"secondary",className:"text-xs bg-blue-50 text-blue-700 hover:bg-blue-100",children:e},e))]})})]})]})}),(0,a.jsxs)(B,{value:"holidays",className:"space-y-4",children:[(0,a.jsx)("div",{className:"p-2 bg-red-50 border border-red-200 rounded-md mb-4",children:(0,a.jsx)("p",{className:"text-xs text-red-600 font-medium",children:"Note: This functionality is currently untested"})}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"Federal Holidays:"}),(0,a.jsx)(g,{variant:"outline",size:"sm",onClick:()=>{let e=v.length===es.length?[]:es.map(e=>e.name),t=e.length>0?es.map(e=>({start:e.date,end:e.date})):[];null==j||j(e),null==o||o(e=>({...e,holidays:t})),i(t.length>0?t[0]:null)},children:v.length===es.length?"Deselect All":"Select All"})]}),(0,a.jsx)("div",{className:"space-y-2 max-h-60 overflow-y-auto border rounded-md p-2",children:es.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between py-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(U,{id:"holiday-".concat(e.name),checked:v.includes(e.name),onCheckedChange:()=>w(e.name)}),(0,a.jsx)(M,{htmlFor:"holiday-".concat(e.name),children:e.name})]}),(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:e.date})]},e.name))}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"Selected Holidays:"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:d.holidays.length>0?d.holidays.map((e,t)=>{var s;return(0,a.jsxs)(Y,{variant:"secondary",className:"text-xs",children:[e.start," - ",null===(s=es.find(t=>t.date===e.start))||void 0===s?void 0:s.name]},t)}):(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"No holidays selected"})})]})]})]})}var en=s(532);let el=en.bL,ei=en.l9,er=n.forwardRef((e,t)=>{let{className:s,align:n="center",sideOffset:l=4,...i}=e;return(0,a.jsx)(en.ZL,{children:(0,a.jsx)(en.UC,{ref:t,align:n,sideOffset:l,className:u("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...i})})});er.displayName=en.UC.displayName;var ec=s(7859),ed=s(853),eo=s(6217),em=s(767);eo.bL,eo.l9;let ef=eo.ZL;eo.bm;let eh=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(eo.hJ,{ref:t,className:u("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...n})});eh.displayName=eo.hJ.displayName,n.forwardRef((e,t)=>{let{className:s,children:n,...l}=e;return(0,a.jsxs)(ef,{children:[(0,a.jsx)(eh,{}),(0,a.jsxs)(eo.UC,{ref:t,className:u("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...l,children:[n,(0,a.jsxs)(eo.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(em.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}).displayName=eo.UC.displayName,n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(eo.hE,{ref:t,className:u("text-lg font-semibold leading-none tracking-tight",s),...n})}).displayName=eo.hE.displayName,n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(eo.VY,{ref:t,className:u("text-sm text-muted-foreground",s),...n})}).displayName=eo.VY.displayName;let eu=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(ec.uB,{ref:t,className:u("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",s),...n})});eu.displayName=ec.uB.displayName,n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsxs)("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[(0,a.jsx)(ed.A,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),(0,a.jsx)(ec.uB.Input,{ref:t,className:u("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",s),...n})]})}).displayName=ec.uB.Input.displayName;let ex=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(ec.uB.List,{ref:t,className:u("max-h-[300px] overflow-y-auto overflow-x-hidden",s),...n})});ex.displayName=ec.uB.List.displayName,n.forwardRef((e,t)=>(0,a.jsx)(ec.uB.Empty,{ref:t,className:"py-6 text-center text-sm",...e})).displayName=ec.uB.Empty.displayName;let eg=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(ec.uB.Group,{ref:t,className:u("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",s),...n})});eg.displayName=ec.uB.Group.displayName,n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(ec.uB.Separator,{ref:t,className:u("-mx-1 h-px bg-border",s),...n})}).displayName=ec.uB.Separator.displayName;let ep=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(ec.uB.Item,{ref:t,className:u("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",s),...n})});ep.displayName=ec.uB.Item.displayName;var ev=s(8617),ej=s(7756);let eN=ej.Kq,ey=ej.bL,eb=ej.l9,ew=n.forwardRef((e,t)=>{let{className:s,sideOffset:n=4,...l}=e;return(0,a.jsx)(ej.UC,{ref:t,sideOffset:n,className:u("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...l})});function ek(e){let{content:t,className:s="",size:n="sm",asSpan:l=!1}=e,i="inline-flex items-center justify-center text-gray-400 hover:text-gray-600 focus:outline-none transition-colors ".concat(s),r="sm"===n?"h-3.5 w-3.5":"h-4 w-4";return(0,a.jsx)(eN,{children:(0,a.jsxs)(ey,{delayDuration:300,children:[(0,a.jsx)(eb,{asChild:!0,children:l?(0,a.jsx)("span",{className:i,"aria-label":"More information",children:(0,a.jsx)(ev.A,{className:r,strokeWidth:2})}):(0,a.jsx)("button",{className:i,"aria-label":"More information",type:"button",children:(0,a.jsx)(ev.A,{className:r,strokeWidth:2})})}),(0,a.jsx)(ew,{side:"top",align:"center",className:"w-[350px] p-3 text-sm bg-white border border-gray-200 shadow-md rounded-md z-50 break-words overflow-hidden",children:t})]})})}ew.displayName=ej.UC.displayName;let eA=["CONSTRUCTION","MAINTENANCE","TRAFFIC HAZARD","DEBRIS IN THE ROAD","HEAVY TRAFFIC","STALLED VEHICLE","CRASH FATAL","CRASH PD","CRASH PI","CRASH SITE CLEANUP","HIGH WATER","LOCAL EVENT","MEDICAL EMERGENCY","SLIDE OFF","SUPERLOAD","VEHICLE FIRE","FIRE"],eS=["NORMAL","COMPLETED"],e_=["1","2","3","4","5","6","7","8"],eL={blockType:["SLOW","CLOSED","N/A"],allLanesAffected:["Positive Direction","Negative Direction"],lanesAffected:{positive:Array.from({length:7},(e,t)=>t+1),negative:Array.from({length:7},(e,t)=>t+1)},additionalFilters:{negative_exit_ramp_affected:[!0,!1],negative_entrance_ramp_affected:[!0,!1],positive_exit_ramp_affected:[!0,!1],positive_entrance_ramp_affected:[!0,!1],negative_inside_shoulder_affected:[!0,!1],negative_outside_shoulder_affected:[!0,!1],positive_inside_shoulder_affected:[!0,!1],positive_outside_shoulder_affected:[!0,!1]}};function eC(e){let{selectedCarEvents:t,setSelectedCarEvents:s,onSelectedCarEventsChange:l,selectedLaneBlockages:i,setSelectedLaneBlockages:r,onSelectedLaneBlockagesChange:c,selectedRestAreaFilters:d,setSelectedRestAreaFilters:o,onSelectedRestAreaFiltersChange:m,selectedPriorities:f=[],setSelectedPriorities:h,onSelectedPrioritiesChange:u,selectedEventStatuses:x=[],setSelectedEventStatuses:p,onSelectedEventStatusesChange:v}=e;(0,n.useEffect)(()=>{var e,t,s,a,n,l;i&&0!==Object.keys(i).length&&((null===(e=i.blockType)||void 0===e?void 0:e.length)||(null===(t=i.allLanesAffected)||void 0===t?void 0:t.length)||(null===(a=i.lanesAffected)||void 0===a?void 0:null===(s=a.positive)||void 0===s?void 0:s.length)||(null===(l=i.lanesAffected)||void 0===l?void 0:null===(n=l.negative)||void 0===n?void 0:n.length))||null==r||r({blockType:[],allLanesAffected:[],lanesAffected:{positive:[],negative:[]},additionalFilters:{negative_exit_ramp_affected:[],negative_entrance_ramp_affected:[],positive_exit_ramp_affected:[],positive_entrance_ramp_affected:[],negative_inside_shoulder_affected:[],negative_outside_shoulder_affected:[],positive_inside_shoulder_affected:[],positive_outside_shoulder_affected:[]}})},[]);let[j,N]=(0,n.useState)("car-events"),[b,w]=(0,n.useState)(x||[]),[k,A]=(0,n.useState)(f||[]),S=e=>{let t=i.blockType.includes(e)?i.blockType.filter(t=>t!==e):[...i.blockType,e];null==r||r({...i,blockType:t})},_=e=>{let t=i.allLanesAffected.includes(e)?i.allLanesAffected.filter(t=>t!==e):[...i.allLanesAffected,e];null==r||r({...i,allLanesAffected:t})},L=(e,t)=>{let s=i.lanesAffected[e],a=s.includes(t)?s.filter(e=>e!==t):[...s,t];null==r||r({...i,lanesAffected:{...i.lanesAffected,[e]:a}})},C=(e,t)=>{let s=i.additionalFilters[e],a=s.includes(t)?s.filter(e=>e!==t):[...s,t];null==r||r({...i,additionalFilters:{...i.additionalFilters,[e]:a}})},E=(e,t,s)=>{s(t.length===e.length?[]:[...e])};return(0,n.useEffect)(()=>{h&&h(k)},[k,h]),(0,n.useEffect)(()=>{p&&p(b)},[b,p]),(0,a.jsxs)(T,{value:j,onValueChange:e=>N(e),className:"w-full",children:[(0,a.jsxs)(D,{className:"flex flex-wrap gap-2 mb-4 bg-transparent p-0",children:[(0,a.jsxs)(I,{value:"car-events",className:"bg-white hover:bg-gray-50 data-[state=active]:bg-blue-100 data-[state=active]:text-blue-900 data-[state=active]:border-blue-500 shadow-sm border-2 border-gray-300 flex items-center gap-1",children:["Car Events",(0,a.jsx)(ek,{asSpan:!0,content:(0,a.jsxs)("div",{className:"space-y-2 w-full",children:[(0,a.jsx)("p",{className:"font-medium",children:"Car Events"}),(0,a.jsx)("p",{children:"Description: Traffic Incidents information"}),(0,a.jsxs)("p",{className:"break-words",children:["Source: ",(0,a.jsx)("a",{href:"https://content.trafficwise.org/json/cars-event-feed.json",className:"text-blue-600 hover:underline",target:"_blank",rel:"noopener noreferrer",children:"cars-event-feed.json"})," (511)"]})]})})]}),(0,a.jsxs)(I,{value:"lane-blockages",className:"bg-white hover:bg-gray-50 data-[state=active]:bg-blue-100 data-[state=active]:text-blue-900 data-[state=active]:border-blue-500 shadow-sm border-2 border-gray-300 flex items-center gap-1",children:["Lane Blockages",(0,a.jsx)(ek,{asSpan:!0,content:(0,a.jsxs)("div",{className:"space-y-2 w-full",children:[(0,a.jsx)("p",{className:"font-medium",children:"Lane Blockages"}),(0,a.jsx)("p",{children:"Description: Lane Blockages Information"}),(0,a.jsxs)("p",{className:"break-words",children:["Source: ",(0,a.jsx)("a",{href:"https://content.trafficwise.org/json/cars-event-feed.json",className:"text-blue-600 hover:underline",target:"_blank",rel:"noopener noreferrer",children:"cars-event-feed.json"})," (511)"]})]})})]}),(0,a.jsxs)(I,{value:"road-weather",className:"bg-white hover:bg-gray-50 data-[state=active]:bg-blue-100 data-[state=active]:text-blue-900 data-[state=active]:border-blue-500 shadow-sm border-2 border-gray-300 flex items-center gap-1",children:["Road Weather",(0,a.jsx)(ek,{asSpan:!0,content:(0,a.jsxs)("div",{className:"space-y-2 w-full",children:[(0,a.jsx)("p",{className:"font-medium",children:"RWIS"}),(0,a.jsx)("p",{children:"Description: Road weather information system data"}),(0,a.jsxs)("p",{className:"break-words",children:["Source: ",(0,a.jsx)("a",{href:"https://content.trafficwise.org/json/rwis.json",className:"text-blue-600 hover:underline",target:"_blank",rel:"noopener noreferrer",children:"rwis.json"})]})]})})]}),(0,a.jsx)(I,{value:"social-events",className:"bg-white hover:bg-gray-50 data-[state=active]:bg-blue-100 data-[state=active]:text-blue-900 data-[state=active]:border-blue-500 shadow-sm border-2 border-gray-300",children:"Social Events"}),(0,a.jsx)(I,{value:"weather-events",className:"bg-white hover:bg-gray-50 data-[state=active]:bg-blue-100 data-[state=active]:text-blue-900 data-[state=active]:border-blue-500 shadow-sm border-2 border-gray-300",children:"Weather Events"})]}),(0,a.jsxs)(B,{value:"car-events",className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"Event Types:"}),(0,a.jsx)(ek,{content:(0,a.jsx)("p",{children:"Type of the event"})})]}),(0,a.jsx)(g,{variant:"outline",size:"sm",onClick:()=>{let e=t.length===eA.length?[]:[...eA];l?null==l||l(e):s&&(null==s||s(e))},children:t.length===eA.length?"Deselect All":"Select All"})]}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-2 max-h-60 overflow-y-auto border rounded-md p-2",children:eA.map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(U,{id:"event-".concat(e),checked:t.includes(e),onCheckedChange:a=>{a?null==s||s([...t,e]):null==s||s(t.filter(t=>t!==e))}}),(0,a.jsx)(M,{htmlFor:"event-".concat(e),children:e})]},e))})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"Event Status:"}),(0,a.jsx)(ek,{content:(0,a.jsx)("p",{children:"Status of the traffic event"})})]}),(0,a.jsx)(g,{variant:"outline",size:"sm",onClick:()=>{let e=b.length===eS.length?[]:[...eS];w(e),v?v(e):p&&(null==p||p(e))},children:x.length===eS.length?"Deselect All":"Select All"})]}),(0,a.jsx)("div",{className:"flex gap-4",children:eS.map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(U,{id:"status-".concat(e),checked:b.includes(e),onCheckedChange:t=>{t?w([...b,e]):w(b.filter(t=>t!==e))}}),(0,a.jsx)(M,{htmlFor:"status-".concat(e),children:e})]},e))})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"Priority:"}),(0,a.jsx)(ek,{content:(0,a.jsx)("p",{children:"Priority ranking assigned to the traffic event"})})]}),(0,a.jsxs)(el,{children:[(0,a.jsx)(ei,{asChild:!0,children:(0,a.jsx)(g,{variant:"outline",className:"w-full justify-between mt-1",children:k.length>0?"".concat(k.length," priorities selected"):"Select priorities..."})}),(0,a.jsx)(er,{className:"w-[300px] p-0",align:"start",children:(0,a.jsx)(eu,{children:(0,a.jsx)(ex,{children:(0,a.jsxs)(eg,{children:[(0,a.jsxs)(ep,{onSelect:()=>E(e_,k,A),className:"flex items-center gap-2",children:[(0,a.jsx)(y.A,{className:k.length===e_.length?"opacity-100":"opacity-0",size:16}),(0,a.jsx)("span",{children:"Select All"})]}),e_.map(e=>(0,a.jsxs)(ep,{onSelect:()=>{A(k.includes(e)?k.filter(t=>t!==e):[...k,e])},className:"flex items-center gap-2",children:[(0,a.jsx)(y.A,{className:k.includes(e)?"opacity-100":"opacity-0",size:16}),(0,a.jsx)("span",{children:e})]},e))]})})})})]})]})]}),(0,a.jsxs)(B,{value:"lane-blockages",className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"Block Type:"}),(0,a.jsx)(ek,{content:(0,a.jsx)("p",{children:"Describes the type of blockage"})})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2 border rounded-md p-3",children:eL.blockType.map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(U,{id:"block-type-".concat(e),checked:i.blockType.includes(e),onCheckedChange:()=>S(e)}),(0,a.jsx)(M,{htmlFor:"block-type-".concat(e),children:e})]},e))})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"All Lanes Affected:"}),(0,a.jsx)(ek,{content:(0,a.jsx)("p",{children:"Describe if all lanes are affected in positive or negative direction"})})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-4 border rounded-md p-3",children:eL.allLanesAffected.map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(U,{id:"all-lanes-".concat(e),checked:i.allLanesAffected.includes(e),onCheckedChange:()=>_(e)}),(0,a.jsx)(M,{htmlFor:"all-lanes-".concat(e),children:e})]},e))})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"Lanes Affected:"}),(0,a.jsx)(ek,{content:(0,a.jsx)("p",{children:"Number of lanes impacted in the positive or negative direction"})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-xs text-gray-600",children:"Positive Direction:"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2 border rounded-md p-3",children:eL.lanesAffected.positive.map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(U,{id:"positive-lane-".concat(e),checked:i.lanesAffected.positive.includes(e),onCheckedChange:()=>L("positive",e)}),(0,a.jsx)(M,{htmlFor:"positive-lane-".concat(e),children:e})]},"positive-".concat(e)))})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-xs text-gray-600",children:"Negative Direction:"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2 border rounded-md p-3",children:eL.lanesAffected.negative.map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(U,{id:"negative-lane-".concat(e),checked:i.lanesAffected.negative.includes(e),onCheckedChange:()=>L("negative",e)}),(0,a.jsx)(M,{htmlFor:"negative-lane-".concat(e),children:e})]},"negative-".concat(e)))})]})]})]}),(0,a.jsx)("div",{className:"space-y-2",children:(0,a.jsxs)(el,{children:[(0,a.jsx)(ei,{asChild:!0,children:(0,a.jsxs)(g,{variant:"outline",className:"w-full justify-between",children:["Additional Filters",(0,a.jsx)("span",{className:"text-xs text-gray-500",children:Object.values(i.additionalFilters).flat().length>0?"".concat(Object.values(i.additionalFilters).flat().length," selected"):"None selected"})]})}),(0,a.jsx)(er,{className:"w-[350px] p-4",align:"start",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"Ramps:"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-2",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"text-xs text-gray-600",children:"Negative Exit Ramp Affected:"}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(U,{id:"negative-exit-ramp-true",checked:i.additionalFilters.negative_exit_ramp_affected.includes(!0),onCheckedChange:()=>C("negative_exit_ramp_affected",!0)}),(0,a.jsx)(M,{htmlFor:"negative-exit-ramp-true",children:"Yes"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(U,{id:"negative-exit-ramp-false",checked:i.additionalFilters.negative_exit_ramp_affected.includes(!1),onCheckedChange:()=>C("negative_exit_ramp_affected",!1)}),(0,a.jsx)(M,{htmlFor:"negative-exit-ramp-false",children:"No"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"text-xs text-gray-600",children:"Negative Entrance Ramp Affected:"}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(U,{id:"negative-entrance-ramp-true",checked:i.additionalFilters.negative_entrance_ramp_affected.includes(!0),onCheckedChange:()=>C("negative_entrance_ramp_affected",!0)}),(0,a.jsx)(M,{htmlFor:"negative-entrance-ramp-true",children:"Yes"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(U,{id:"negative-entrance-ramp-false",checked:i.additionalFilters.negative_entrance_ramp_affected.includes(!1),onCheckedChange:()=>C("negative_entrance_ramp_affected",!1)}),(0,a.jsx)(M,{htmlFor:"negative-entrance-ramp-false",children:"No"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"text-xs text-gray-600",children:"Positive Exit Ramp Affected:"}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(U,{id:"positive-exit-ramp-true",checked:i.additionalFilters.positive_exit_ramp_affected.includes(!0),onCheckedChange:()=>C("positive_exit_ramp_affected",!0)}),(0,a.jsx)(M,{htmlFor:"positive-exit-ramp-true",children:"Yes"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(U,{id:"positive-exit-ramp-false",checked:i.additionalFilters.positive_exit_ramp_affected.includes(!1),onCheckedChange:()=>C("positive_exit_ramp_affected",!1)}),(0,a.jsx)(M,{htmlFor:"positive-exit-ramp-false",children:"No"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"text-xs text-gray-600",children:"Positive Entrance Ramp Affected:"}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(U,{id:"positive-entrance-ramp-true",checked:i.additionalFilters.positive_entrance_ramp_affected.includes(!0),onCheckedChange:()=>C("positive_entrance_ramp_affected",!0)}),(0,a.jsx)(M,{htmlFor:"positive-entrance-ramp-true",children:"Yes"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(U,{id:"positive-entrance-ramp-false",checked:i.additionalFilters.positive_entrance_ramp_affected.includes(!1),onCheckedChange:()=>C("positive_entrance_ramp_affected",!1)}),(0,a.jsx)(M,{htmlFor:"positive-entrance-ramp-false",children:"No"})]})]})]})]}),(0,a.jsx)("p",{className:"text-sm font-medium mt-4",children:"Shoulders:"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-2",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"text-xs text-gray-600",children:"Negative Inside Shoulder Affected:"}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(U,{id:"negative-inside-shoulder-true",checked:i.additionalFilters.negative_inside_shoulder_affected.includes(!0),onCheckedChange:()=>C("negative_inside_shoulder_affected",!0)}),(0,a.jsx)(M,{htmlFor:"negative-inside-shoulder-true",children:"Yes"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(U,{id:"negative-inside-shoulder-false",checked:i.additionalFilters.negative_inside_shoulder_affected.includes(!1),onCheckedChange:()=>C("negative_inside_shoulder_affected",!1)}),(0,a.jsx)(M,{htmlFor:"negative-inside-shoulder-false",children:"No"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"text-xs text-gray-600",children:"Negative Outside Shoulder Affected:"}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(U,{id:"negative-outside-shoulder-true",checked:i.additionalFilters.negative_outside_shoulder_affected.includes(!0),onCheckedChange:()=>C("negative_outside_shoulder_affected",!0)}),(0,a.jsx)(M,{htmlFor:"negative-outside-shoulder-true",children:"Yes"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(U,{id:"negative-outside-shoulder-false",checked:i.additionalFilters.negative_outside_shoulder_affected.includes(!1),onCheckedChange:()=>C("negative_outside_shoulder_affected",!1)}),(0,a.jsx)(M,{htmlFor:"negative-outside-shoulder-false",children:"No"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"text-xs text-gray-600",children:"Positive Inside Shoulder Affected:"}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(U,{id:"positive-inside-shoulder-true",checked:i.additionalFilters.positive_inside_shoulder_affected.includes(!0),onCheckedChange:()=>C("positive_inside_shoulder_affected",!0)}),(0,a.jsx)(M,{htmlFor:"positive-inside-shoulder-true",children:"Yes"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(U,{id:"positive-inside-shoulder-false",checked:i.additionalFilters.positive_inside_shoulder_affected.includes(!1),onCheckedChange:()=>C("positive_inside_shoulder_affected",!1)}),(0,a.jsx)(M,{htmlFor:"positive-inside-shoulder-false",children:"No"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"text-xs text-gray-600",children:"Positive Outside Shoulder Affected:"}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(U,{id:"positive-outside-shoulder-true",checked:i.additionalFilters.positive_outside_shoulder_affected.includes(!0),onCheckedChange:()=>C("positive_outside_shoulder_affected",!0)}),(0,a.jsx)(M,{htmlFor:"positive-outside-shoulder-true",children:"Yes"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(U,{id:"positive-outside-shoulder-false",checked:i.additionalFilters.positive_outside_shoulder_affected.includes(!1),onCheckedChange:()=>C("positive_outside_shoulder_affected",!1)}),(0,a.jsx)(M,{htmlFor:"positive-outside-shoulder-false",children:"No"})]})]})]})]})]})})]})})]}),(0,a.jsx)(B,{value:"road-weather",className:"space-y-4",children:(0,a.jsxs)("div",{className:"border rounded-md p-4 h-60 flex flex-col items-center justify-center bg-muted/50",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Road Weather Information System"}),(0,a.jsx)("p",{className:"text-center text-gray-600 mb-4",children:"RWIS filtering options will be available soon."})]})}),(0,a.jsx)(B,{value:"social-events",className:"space-y-4",children:(0,a.jsx)("div",{className:"border rounded-md p-4 h-40 flex items-center justify-center bg-muted/50",children:(0,a.jsx)("p",{className:"text-center text-muted-foreground",children:"Social Events filtering options will be available soon"})})}),(0,a.jsx)(B,{value:"weather-events",className:"space-y-4",children:(0,a.jsx)("div",{className:"border rounded-md p-4 h-40 flex items-center justify-center bg-muted/50",children:(0,a.jsx)("p",{className:"text-center text-muted-foreground",children:"Weather Events filtering options will be available soon"})})})]})}let eE=(0,m.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),eR=n.forwardRef((e,t)=>{let{className:s,variant:n,...l}=e;return(0,a.jsx)("div",{ref:t,role:"alert",className:u(eE({variant:n}),s),...l})});eR.displayName="Alert";let eT=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("h5",{ref:t,className:u("mb-1 font-medium leading-none tracking-tight",s),...n})});eT.displayName="AlertTitle";let eD=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:u("text-sm [&_p]:leading-relaxed",s),...n})});eD.displayName="AlertDescription";let eI=e=>{let{className:t}=e;return(0,a.jsx)("div",{className:"animate-spin ".concat(t||""),children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,a.jsx)("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})})})};function eB(e){let{onFilteredDataChange:t,onSelectedDatasetsChange:s}=e,[l,i]=(0,n.useState)([]),[c,d]=(0,n.useState)(null),[o,m]=(0,n.useState)([]),[f,h]=(0,n.useState)([]),[u,x]=(0,n.useState)(null),[p,R]=(0,n.useState)(!1),[T,D]=(0,n.useState)(null),I=()=>({id:"filter-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),name:"Filter ".concat(l.length+1),isOpen:!0,openSelector:null,locations:{cities:[],roads:[],districts:[]},timeframe:null,datasets:{carEvents:[],laneBlockages:{blockType:[],allLanesAffected:[],lanesAffected:{positive:[],negative:[]},additionalFilters:{negative_exit_ramp_affected:[],negative_entrance_ramp_affected:[],positive_exit_ramp_affected:[],positive_entrance_ramp_affected:[],negative_inside_shoulder_affected:[],negative_outside_shoulder_affected:[],positive_inside_shoulder_affected:[],positive_outside_shoulder_affected:[]}},priorities:[],eventStatuses:[],restAreaFilters:{capacity:[],spacesAvailable:[],siteAreaStatus:[],amenities:[]}}});(0,n.useEffect)(()=>{if(0===l.length){let e=I();i([e]),d(e.id)}},[]);let B=(e,t)=>{i(s=>s.map(s=>s.id===e?{...s,openSelector:s.openSelector===t?null:t}:s))},F=e=>{i(t=>t.map(t=>t.id===e?{...t,isOpen:!t.isOpen}:t))},O=e=>{i(t=>{let s=t.filter(t=>t.id!==e);if(e===c&&s.length>0)d(s[0].id);else if(0===s.length){let e=I();return d(e.id),[e]}return s})},M=(e,t)=>{i(s=>s.map(s=>s.id===e?{...s,name:t}:s))},P=e=>{let t=[...e.locations.roads,...e.locations.cities,...e.locations.districts];return 0===t.length?"No locations selected":t.length<=3?"Selected: ".concat(t.join(", ")):"Selected: ".concat(t.slice(0,2).join(", ")," + ").concat(t.length-2," more")},z=e=>{if(!e.timeframe)return"No timeframe selected";let t=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return"Selected: ".concat(t(e.timeframe.start)," to ").concat(t(e.timeframe.end))},H=e=>{let t=e.datasets.carEvents.length,s=e.datasets.laneBlockages.blockType.length+e.datasets.laneBlockages.allLanesAffected.length+e.datasets.laneBlockages.lanesAffected.positive.length+e.datasets.laneBlockages.lanesAffected.negative.length+Object.values(e.datasets.laneBlockages.additionalFilters).flat().length,a=Object.values(e.datasets.restAreaFilters).flat().length;if(0===t&&0===s&&0===a)return"No datasets selected";let n=[];return(t>0&&n.push(e.datasets.carEvents.length<=2?e.datasets.carEvents.join(", "):"".concat(e.datasets.carEvents.length," Car Events")),s>0&&n.push("Lane Blockages"),a>0&&n.push("Rest Area Filters"),n.length<=2)?"Selected: ".concat(n.join(", ")):"Selected: ".concat(n.slice(0,2).join(", ")," + ").concat(n.length-2," more")};return(0,n.useEffect)(()=>{(async()=>{try{let e=await fetch("./json/cars-event-feed.json");if(!e.ok)throw Error("Failed to fetch car events data: ".concat(e.status));let t=await e.json();m(t),console.log("Successfully loaded car events data:",t.length,"events")}catch(e){console.error("Error loading car events data:",e),D("Failed to load car events data. Please try again.")}})()},[]),(0,n.useEffect)(()=>{if(s&&c){let e=l.find(e=>e.id===c);e&&s({carEvents:e.datasets.carEvents,laneBlockages:e.datasets.laneBlockages})}},[l,c,s]),(0,a.jsxs)("div",{className:"h-full flex flex-col p-4 overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"Data Filters"}),(0,a.jsxs)(g,{onClick:()=>{let e=I();i(t=>[...t,e]),d(e.id)},variant:"outline",className:"flex items-center",children:[(0,a.jsx)(v.A,{className:"mr-2 h-4 w-4"})," Add Filter"]})]}),(0,a.jsx)("div",{className:"space-y-4",children:l.map(e=>(0,a.jsxs)(_,{className:"mb-4 ".concat(c===e.id?"border-blue-500 shadow-md":""),children:[(0,a.jsxs)(L,{className:"p-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(g,{variant:"ghost",size:"sm",className:"p-0 h-8 w-8",onClick:()=>F(e.id),children:e.isOpen?(0,a.jsx)(j.A,{className:"h-5 w-5"}):(0,a.jsx)(N.A,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{className:"flex items-center",children:[c===e.id?(0,a.jsx)("input",{className:"h-8 px-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500",value:e.name,onChange:t=>M(e.id,t.target.value),onClick:e=>e.stopPropagation()}):(0,a.jsx)(C,{className:"text-lg cursor-pointer",onClick:()=>d(e.id),children:e.name}),c===e.id&&(0,a.jsx)("span",{className:"ml-2 inline-flex items-center rounded-full bg-blue-100 px-2.5 py-0.5 text-xs font-medium text-blue-800",children:"Active"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(g,{variant:"ghost",size:"sm",className:"p-1 h-8 w-8 ".concat(c===e.id?"text-blue-500":""),onClick:()=>d(e.id),title:"Set as active filter",children:(0,a.jsx)(y.A,{className:"h-4 w-4"})}),(0,a.jsx)(g,{variant:"ghost",size:"sm",className:"p-1 h-8 w-8 text-red-500 hover:bg-red-50",onClick:()=>O(e.id),title:"Remove filter",disabled:1===l.length,children:(0,a.jsx)(b.A,{className:"h-4 w-4"})})]})]}),!e.isOpen&&(0,a.jsxs)("div",{className:"mt-2 text-sm text-muted-foreground grid grid-cols-1 gap-1",children:[(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)(w.A,{className:"h-4 w-4 mr-1 mt-0.5"}),(0,a.jsxs)("span",{children:[(0,a.jsx)("strong",{children:"Locations:"})," ",P(e)]})]}),(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)(k.A,{className:"h-4 w-4 mr-1 mt-0.5"}),(0,a.jsxs)("span",{children:[(0,a.jsx)("strong",{children:"Timeframe:"})," ",z(e)]})]}),(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)(r.A,{className:"h-4 w-4 mr-1 mt-0.5"}),(0,a.jsxs)("span",{children:[(0,a.jsx)("strong",{children:"Datasets:"})," ",H(e)]})]})]})]}),e.isOpen&&(0,a.jsxs)("div",{className:"px-4 pb-4",children:[(0,a.jsxs)(_,{className:"mb-4 border shadow-sm",children:[(0,a.jsx)(L,{className:"p-3 cursor-pointer",onClick:()=>B(e.id,"location"),children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(w.A,{className:"h-5 w-5"}),(0,a.jsx)(C,{className:"text-base",children:"Select Location"})]}),"location"===e.openSelector?(0,a.jsx)(j.A,{className:"h-5 w-5"}):(0,a.jsx)(N.A,{className:"h-5 w-5"})]})}),"location"===e.openSelector&&(0,a.jsx)(E,{children:(0,a.jsx)(q,{selectedRoads:e.locations.roads,onSelectedRoadsChange:t=>{i(s=>s.map(s=>s.id===e.id?{...s,locations:{...s.locations,roads:t}}:s))},selectedLocations:e.locations.cities,onSelectedLocationsChange:t=>{i(s=>s.map(s=>s.id===e.id?{...s,locations:{...s.locations,cities:t}}:s))},selectedDistricts:e.locations.districts,onSelectedDistrictsChange:t=>{i(s=>s.map(s=>s.id===e.id?{...s,locations:{...s.locations,districts:t}}:s))}})})]}),(0,a.jsxs)(_,{className:"mb-4 border shadow-sm",children:[(0,a.jsx)(L,{className:"p-3 cursor-pointer",onClick:()=>B(e.id,"timeframe"),children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(k.A,{className:"h-5 w-5"}),(0,a.jsx)(C,{className:"text-base",children:"Select Timeframe"})]}),"timeframe"===e.openSelector?(0,a.jsx)(j.A,{className:"h-5 w-5"}):(0,a.jsx)(N.A,{className:"h-5 w-5"})]})}),"timeframe"===e.openSelector&&(0,a.jsx)(E,{children:(0,a.jsx)(ea,{selectedTimeframe:e.timeframe,onSelectedTimeframeChange:t=>{i(s=>s.map(s=>s.id===e.id?{...s,timeframe:t}:s))}})})]}),(0,a.jsxs)(_,{className:"mb-4 border shadow-sm",children:[(0,a.jsx)(L,{className:"p-3 cursor-pointer",onClick:()=>B(e.id,"dataset"),children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(r.A,{className:"h-5 w-5"}),(0,a.jsx)(C,{className:"text-base",children:"Select Dataset"})]}),"dataset"===e.openSelector?(0,a.jsx)(j.A,{className:"h-5 w-5"}):(0,a.jsx)(N.A,{className:"h-5 w-5"})]})}),"dataset"===e.openSelector&&(0,a.jsx)(E,{children:(0,a.jsx)(eC,{selectedCarEvents:e.datasets.carEvents,onSelectedCarEventsChange:t=>{i(s=>s.map(s=>s.id===e.id?{...s,datasets:{...s.datasets,carEvents:t}}:s))},selectedLaneBlockages:e.datasets.laneBlockages,onSelectedLaneBlockagesChange:t=>{i(s=>s.map(s=>s.id===e.id?{...s,datasets:{...s.datasets,laneBlockages:t}}:s))},selectedRestAreaFilters:e.datasets.restAreaFilters,onSelectedRestAreaFiltersChange:t=>{i(s=>s.map(s=>s.id===e.id?{...s,datasets:{...s.datasets,restAreaFilters:t}}:s))},selectedPriorities:e.datasets.priorities,onSelectedPrioritiesChange:t=>{i(s=>s.map(s=>s.id===e.id?{...s,datasets:{...s.datasets,priorities:t}}:s))},selectedEventStatuses:e.datasets.eventStatuses,onSelectedEventStatusesChange:t=>{i(s=>s.map(s=>s.id===e.id?{...s,datasets:{...s.datasets,eventStatuses:t}}:s))}})})]})]})]},e.id))}),T&&(0,a.jsxs)(eR,{variant:"destructive",className:"mt-4",children:[(0,a.jsx)(A.A,{className:"h-4 w-4"}),(0,a.jsx)(eT,{children:"Error"}),(0,a.jsx)(eD,{children:T})]}),null!==u&&0===u&&(0,a.jsxs)(eR,{className:"mt-4 bg-amber-50 border-amber-200",children:[(0,a.jsx)(A.A,{className:"h-4 w-4 text-amber-500"}),(0,a.jsx)(eT,{className:"text-amber-700",children:"No Data Available"}),(0,a.jsx)(eD,{className:"text-amber-600",children:"No data matches your current filter criteria. Try adjusting your filters to see results."})]}),null!==u&&u>0&&(0,a.jsxs)("div",{className:"mt-4 text-sm text-gray-600 flex items-center",children:[(0,a.jsx)("span",{className:"inline-flex items-center justify-center rounded-full bg-green-100 px-2.5 py-0.5 text-green-700 mr-2",children:u}),"events match your filters"]}),(0,a.jsx)("div",{className:"mt-auto pt-4 flex gap-2",children:(0,a.jsx)(g,{className:"flex-1",onClick:()=>{R(!0),D(null);try{let e=l.find(e=>e.id===c);if(!e){D("No active filter selected."),x(0);return}let s=[...o];console.log("Total events before filtering: ".concat(s.length)),console.log("Filtering with:",e.name),e.datasets.carEvents.length>0&&(s=s.filter(t=>e.datasets.carEvents.includes(t.eventType)),console.log("After event type filter: ".concat(s.length," events"))),e.locations.roads.length>0&&(s=s.filter(t=>e.locations.roads.includes(t.route)),console.log("After road filter: ".concat(s.length," events"))),e.locations.cities.length>0&&(s=s.filter(t=>t.locationDetails.city&&t.locationDetails.city.some(t=>e.locations.cities.includes(t))),console.log("After location filter: ".concat(s.length," events"))),e.locations.districts.length>0&&(s=s.filter(t=>t.locationDetails.district&&t.locationDetails.district.some(t=>e.locations.districts.includes(t))),console.log("After district filter: ".concat(s.length," events"))),e.datasets.priorities.length>0&&(s=s.filter(t=>e.datasets.priorities.includes(String(t.priorityLevel))),console.log("After priority filter: ".concat(s.length," events"))),e.datasets.eventStatuses.length>0&&(s=s.filter(t=>e.datasets.eventStatuses.includes(t.eventStatus)),console.log("After status filter: ".concat(s.length," events")));let a=e.datasets.laneBlockages,n=a.blockType.length>0||a.allLanesAffected.length>0||a.lanesAffected.positive.length>0||a.lanesAffected.negative.length>0||Object.values(a.additionalFilters).some(e=>e.length>0);if(console.log("Lane blockage filters:",{blockType:a.blockType,allLanesAffected:a.allLanesAffected,lanesAffected:a.lanesAffected,additionalFilters:a.additionalFilters}),n&&(s=s.filter(e=>{var t,s,n,l,i,r,c,d,o,m,f,h;if(e.positiveLaneBlockage&&(e.positiveLaneBlockage.allLanesAffected||e.positiveLaneBlockage.lanesAffected&&e.positiveLaneBlockage.lanesAffected.length),e.negativeLaneBlockage&&(e.negativeLaneBlockage.allLanesAffected||e.negativeLaneBlockage.lanesAffected&&e.negativeLaneBlockage.lanesAffected.length),a.blockType.length>0){let t=a.blockType.includes(e.positiveLaneBlockageType||"N/A"),s=a.blockType.includes(e.negativeLaneBlockageType||"N/A");if(!t&&!s)return!1}if(a.allLanesAffected.length>0){let n=a.allLanesAffected.includes("Positive Direction"),l=a.allLanesAffected.includes("Negative Direction"),i=(null===(t=e.positiveLaneBlockage)||void 0===t?void 0:t.allLanesAffected)===!0,r=(null===(s=e.negativeLaneBlockage)||void 0===s?void 0:s.allLanesAffected)===!0;if(n&&l&&!i&&!r||n&&!l&&!i||l&&!n&&!r)return!1}if(a.lanesAffected.positive.length>0){let t=(null===(n=e.positiveLaneBlockage)||void 0===n?void 0:n.lanesAffected)||[];if(!a.lanesAffected.positive.some(e=>t.includes(Number(e))))return!1}if(a.lanesAffected.negative.length>0){let t=(null===(l=e.negativeLaneBlockage)||void 0===l?void 0:l.lanesAffected)||[];if(!a.lanesAffected.negative.some(e=>t.includes(Number(e))))return!1}let u=a.additionalFilters;if(u.negative_exit_ramp_affected.length>0){let t=(null===(i=e.negativeLaneBlockage)||void 0===i?void 0:i.exitRampAffected)===!0;if(!u.negative_exit_ramp_affected.includes(t))return!1}if(u.positive_exit_ramp_affected.length>0){let t=(null===(r=e.positiveLaneBlockage)||void 0===r?void 0:r.exitRampAffected)===!0;if(!u.positive_exit_ramp_affected.includes(t))return!1}if(u.negative_entrance_ramp_affected.length>0){let t=(null===(c=e.negativeLaneBlockage)||void 0===c?void 0:c.entranceRampAffected)===!0;if(!u.negative_entrance_ramp_affected.includes(t))return!1}if(u.positive_entrance_ramp_affected.length>0){let t=(null===(d=e.positiveLaneBlockage)||void 0===d?void 0:d.entranceRampAffected)===!0;if(!u.positive_entrance_ramp_affected.includes(t))return!1}if(u.negative_inside_shoulder_affected.length>0){let t=(null===(o=e.negativeLaneBlockage)||void 0===o?void 0:o.insideShoulderAffected)===!0;if(!u.negative_inside_shoulder_affected.includes(t))return!1}if(u.positive_inside_shoulder_affected.length>0){let t=(null===(m=e.positiveLaneBlockage)||void 0===m?void 0:m.insideShoulderAffected)===!0;if(!u.positive_inside_shoulder_affected.includes(t))return!1}if(u.negative_outside_shoulder_affected.length>0){let t=(null===(f=e.negativeLaneBlockage)||void 0===f?void 0:f.outsideShoulderAffected)===!0;if(!u.negative_outside_shoulder_affected.includes(t))return!1}if(u.positive_outside_shoulder_affected.length>0){let t=(null===(h=e.positiveLaneBlockage)||void 0===h?void 0:h.outsideShoulderAffected)===!0;if(!u.positive_outside_shoulder_affected.includes(t))return!1}return!0}),console.log("After lane blockage filters: ".concat(s.length," events"))),e.timeframe){let t=new Date(e.timeframe.start).getTime(),a=new Date(e.timeframe.end).getTime();s=s.filter(e=>{let s=e.dateStart>=t&&e.dateStart<=a,n=!!e.dateEnd&&e.dateEnd>=t&&e.dateEnd<=a,l=e.dateStart<=t&&(!e.dateEnd||e.dateEnd>=a);return s||n||l})}h(s),x(s.length),t&&t(s)}catch(e){console.error("Error filtering car events:",e),D("Failed to filter car events. Please try again."),x(null)}finally{R(!1)}},disabled:p,variant:"default",children:p?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eI,{className:"mr-2 h-4 w-4"}),"Processing..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(S.A,{className:"mr-2 h-4 w-4"}),"Apply Filters"]})})})]})}var eF=s(9990),eO=s.n(eF);function eM(e){let{carEvents:t=[],selectedDatasets:s}=e,[l,i]=(0,n.useState)({hasCarEvents:!1,hasLaneBlockages:!1}),r=(0,n.useRef)(null),c=(0,n.useRef)(null),d=(0,n.useRef)([]),o=(0,n.useRef)([]),m=(0,n.useRef)([]),f=(0,n.useRef)([]),h=(0,n.useRef)(null),[u,x]=(0,n.useState)({dynamicMessageSigns:!1,trafficTimingSystem:!1,restArea:!1}),[p,v]=(0,n.useState)([]),[y,b]=(0,n.useState)([]),[w,k]=(0,n.useState)([]);(0,n.useEffect)(()=>{if(!c.current)return r.current&&(c.current=new(eO()).Map({container:r.current,style:"mapbox://styles/mapbox/navigation-day-v1",center:[-86.1581,39.7684],zoom:7}),c.current.addControl(new(eO()).NavigationControl,"bottom-right"),h.current=new ResizeObserver(()=>{c.current&&setTimeout(()=>{c.current&&c.current.resize()},0)}),h.current.observe(r.current)),()=>{h.current&&r.current&&(h.current.unobserve(r.current),h.current.disconnect()),c.current&&(c.current.remove(),c.current=null)}},[]);let A=[{name:"Crashes",types:["CRASH FATAL","CRASH PI","CRASH PD","CRASH SITE CLEANUP"],color:e=>"rgb(".concat(Math.round(255*e),", 0, 0)")},{name:"Vehicle Issues",types:["STALLED VEHICLE","VEHICLE FIRE","JACKKNIFED SEMI TRAILER","OVERTURNED SEMI TRAILER","ABANDONED VEHICLE","ASSIST MOTORIST"],color:e=>"rgb(255, ".concat(Math.round(165*e),", 0)")},{name:"Construction & Maintenance",types:["CONSTRUCTION","MAINTENANCE","MOBILE MAINTENANCE OPERATIONS"],color:e=>"rgb(255, ".concat(Math.round(255*e),", 0)")},{name:"Road Hazards",types:["TRAFFIC HAZARD","DEBRIS IN THE ROAD","HIGH WATER","HAZARDOUS MATERIALS SPILL","DOWNED POWER LINES","FIRE"],color:e=>"rgb(255, ".concat(Math.round(100*e),", ").concat(Math.round(255*e),")")},{name:"Traffic",types:["HEAVY TRAFFIC","SINGLE LINE TRAFFIC: ALTERNATING DIRECTIONS","RAMP PARTIALLY BLOCKED","POLICE AT SCENE","SUPERLOAD"],color:e=>"rgb(0, 0, ".concat(Math.round(255*e),")")},{name:"Weather & Road Conditions",types:["SLIDE OFF","MEDICAL EMERGENCY"],color:e=>"rgb(".concat(Math.round(165*e),", ").concat(Math.round(42*e),", ").concat(Math.round(42*e),")")},{name:"Other",types:["DUPLICATE EVENT/NOT USED"],color:e=>"rgb(".concat(Math.round(100*e),", ").concat(Math.round(100*e),", ").concat(Math.round(100*e),")")}],S=(e,t)=>{let s=Math.min(1,(9-t)/8);return(A.find(t=>t.types.includes(e))||A[A.length-1]).color(s)},L=e=>new Date(e).toLocaleString();(0,n.useEffect)(()=>{(async()=>{try{let e=await fetch("./json/rest_area.json");if(e.ok){let t=await e.json();v(t.features||[])}let t=await fetch("./json/tts.json");if(t.ok){let e=await t.json();b(e.features||[])}let s=await fetch("./json/VSL.json");if(s.ok){let e=await s.json();k(e||[])}}catch(e){console.error("Error loading layer data:",e)}})()},[]),(0,n.useEffect)(()=>{if(!c.current)return;d.current.forEach(e=>e.remove()),d.current=[],console.log("Rendering ".concat(t.length," car events on the map"));let e=!1,a=!1,n=s&&(s.laneBlockages.blockType.length>0||s.laneBlockages.allLanesAffected.length>0||s.laneBlockages.lanesAffected.positive.length>0||s.laneBlockages.lanesAffected.negative.length>0||Object.values(s.laneBlockages.additionalFilters).some(e=>e.length>0)),l=s&&s.carEvents.length>0;t.forEach(t=>{var s,i,r,o;if(!t.lat||!t.lon){console.warn("Event ".concat(t.id," missing coordinates:"),t);return}let m=document.createElement("div");m.className="car-event-marker";let f="N/A"!==t.positiveLaneBlockageType&&((null===(s=t.positiveLaneBlockage)||void 0===s?void 0:s.allLanesAffected)||(null===(i=t.positiveLaneBlockage)||void 0===i?void 0:i.lanesAffected)&&t.positiveLaneBlockage.lanesAffected.length>0),h="N/A"!==t.negativeLaneBlockageType&&((null===(r=t.negativeLaneBlockage)||void 0===r?void 0:r.allLanesAffected)||(null===(o=t.negativeLaneBlockage)||void 0===o?void 0:o.lanesAffected)&&t.negativeLaneBlockage.lanesAffected.length>0);if((f||h)&&!n||!(f||h)&&!l)return;f||h?a=!0:e=!0,f||h?(m.style.width="22px",m.style.height="22px",m.style.borderRadius="4px",m.style.transform="rotate(45deg)",m.style.backgroundColor=f&&"CLOSED"===t.positiveLaneBlockageType?"#ff0000":h&&"CLOSED"===t.negativeLaneBlockageType?"#ff0000":f&&"SLOW"===t.positiveLaneBlockageType?"#ffa500":h&&"SLOW"===t.negativeLaneBlockageType?"#ffa500":S(t.eventType,t.priorityLevel)):(m.style.width="20px",m.style.height="20px",m.style.borderRadius="50%",m.style.backgroundColor=S(t.eventType,t.priorityLevel)),m.style.border="2px solid white",m.style.boxShadow="0 0 5px rgba(0,0,0,0.5)";let u=(e,t,s)=>{if(!s||"N/A"===t)return"";let a=[];return"N/A"!==t&&a.push('<p style="margin: 0 0 3px;"><strong>'.concat(e," Blockage Type:</strong> ").concat(t,"</p>")),s.allLanesAffected&&a.push('<p style="margin: 0 0 3px;"><strong>'.concat(e," All Lanes:</strong> Affected</p>")),s.lanesAffected&&s.lanesAffected.length>0&&a.push('<p style="margin: 0 0 3px;"><strong>'.concat(e," Lanes Affected:</strong> ").concat(s.lanesAffected.join(", "),"</p>")),s.insideShoulderAffected&&a.push('<p style="margin: 0 0 3px;"><strong>'.concat(e," Inside Shoulder:</strong> Affected</p>")),s.outsideShoulderAffected&&a.push('<p style="margin: 0 0 3px;"><strong>'.concat(e," Outside Shoulder:</strong> Affected</p>")),s.exitRampAffected&&a.push('<p style="margin: 0 0 3px;"><strong>'.concat(e," Exit Ramp:</strong> Affected</p>")),s.entranceRampAffected&&a.push('<p style="margin: 0 0 3px;"><strong>'.concat(e," Entrance Ramp:</strong> Affected</p>")),a.join("")},x=new(eO()).Popup({offset:25}).setHTML('\n          <div style="max-width: 300px;">\n            <h3 style="margin: 0 0 5px; font-weight: bold;">'.concat(t.eventType,'</h3>\n            <p style="margin: 0 0 3px;"><strong>Route:</strong> ').concat(t.route,'</p>\n            <p style="margin: 0 0 3px;"><strong>Status:</strong> ').concat(t.eventStatus,'</p>\n            <p style="margin: 0 0 3px;"><strong>Priority:</strong> ').concat(t.priorityLevel,'</p>\n            <p style="margin: 0 0 3px;"><strong>Start:</strong> ').concat(L(t.dateStart),"</p>\n            ").concat(t.dateEnd?'<p style="margin: 0 0 3px;"><strong>End:</strong> '.concat(L(t.dateEnd),"</p>"):"",'\n            <p style="margin: 0 0 3px;"><strong>Location:</strong> ').concat(t.locationDetails.city.join(", ")||"N/A",'</p>\n            <p style="margin: 0 0 3px;"><strong>County:</strong> ').concat(t.locationDetails.county.join(", "),"</p>\n            \n            ").concat("N/A"!==t.positiveLaneBlockageType||t.positiveLaneBlockage&&Object.values(t.positiveLaneBlockage).some(e=>!0===e||Array.isArray(e)&&e.length>0)?'<div style="margin-top: 8px; border-top: 1px solid #ddd; padding-top: 8px;">\n                <h4 style="margin: 0 0 5px; font-weight: bold;">Positive Direction Lane Blockage</h4>\n                '.concat(u("Positive",t.positiveLaneBlockageType,t.positiveLaneBlockage),"\n              </div>"):"","\n            \n            ").concat("N/A"!==t.negativeLaneBlockageType||t.negativeLaneBlockage&&Object.values(t.negativeLaneBlockage).some(e=>!0===e||Array.isArray(e)&&e.length>0)?'<div style="margin-top: 8px; border-top: 1px solid #ddd; padding-top: 8px;">\n                <h4 style="margin: 0 0 5px; font-weight: bold;">Negative Direction Lane Blockage</h4>\n                '.concat(u("Negative",t.negativeLaneBlockageType,t.negativeLaneBlockage),"\n              </div>"):"","\n          </div>\n        ")),g=new(eO()).Marker(m).setLngLat([t.lon,t.lat]).setPopup(x).addTo(c.current);d.current.push(g)}),i({hasCarEvents:e,hasLaneBlockages:a})},[t,c.current]),(0,n.useEffect)(()=>{if(!c.current||!u.restArea){o.current.forEach(e=>e.remove()),o.current=[];return}o.current.forEach(e=>e.remove()),o.current=[],console.log("Rendering ".concat(p.length," rest areas on the map")),p.forEach(e=>{let t=e.geometry.coordinates,s=e.properties;if(!t||!t.length){console.warn("Rest area missing coordinates:",e);return}let a=document.createElement("div");a.className="rest-area-marker",a.style.width="30px",a.style.height="30px",a.style.backgroundImage='url("./icons/rest-area.svg")',a.style.backgroundSize="cover",a.style.backgroundRepeat="no-repeat";let n=new(eO()).Popup({offset:25}).setHTML('\n          <div style="max-width: 250px;">\n            <h3 style="margin: 0 0 5px; font-weight: bold;">Rest Area</h3>\n            <p style="margin: 0 0 3px;"><strong>Location:</strong> '.concat(s.site_area_location||"N/A",'</p>\n            <p style="margin: 0 0 3px;"><strong>Description:</strong> ').concat(s.site_area_description||"N/A",'</p>\n            <p style="margin: 0 0 3px;"><strong>Status:</strong> ').concat(s.site_area_status||"N/A",'</p>\n            <p style="margin: 0 0 3px;"><strong>Route:</strong> ').concat(s.site_route||"N/A","</p>\n            ").concat(s.amenities&&Array.isArray(s.amenities)?'<p style="margin: 0 0 3px;"><strong>Amenities:</strong> '.concat(s.amenities.join(", "),"</p>"):"","\n            ").concat(s.tpims&&s.tpims.spaces_available?'<p style="margin: 0 0 3px;"><strong>Spaces Available:</strong> '.concat(s.tpims.spaces_available,"</p>"):"","\n          </div>\n        ")),l=new(eO()).Marker(a).setLngLat([t[0],t[1]]).setPopup(n).addTo(c.current);o.current.push(l)})},[p,u.restArea,c.current]),(0,n.useEffect)(()=>{if(!c.current||!u.trafficTimingSystem){m.current.forEach(e=>e.remove()),m.current=[];return}m.current.forEach(e=>e.remove()),m.current=[],console.log("Rendering ".concat(y.length," traffic timing systems on the map")),y.forEach(e=>{let t=e.geometry.coordinates,s=e.properties;if(!t||!t.length){console.warn("TTS missing coordinates:",e);return}let a=document.createElement("div");a.className="tts-marker",a.style.width="30px",a.style.height="30px",a.style.backgroundImage='url("./icons/tts.svg")',a.style.backgroundSize="cover",a.style.backgroundRepeat="no-repeat";let n=new(eO()).Popup({offset:25}).setHTML('\n          <div style="max-width: 250px;">\n            <h3 style="margin: 0 0 5px; font-weight: bold;">Traffic Timing System</h3>\n            <p style="margin: 0 0 3px;"><strong>Title:</strong> '.concat(s.title||"N/A",'</p>\n            <p style="margin: 0 0 3px;"><strong>Route:</strong> ').concat(s.route||"N/A",'</p>\n            <p style="margin: 0 0 3px;"><strong>Direction:</strong> ').concat(s.travel_direction||"N/A",'</p>\n            <p style="margin: 0 0 3px;"><strong>Mile Point:</strong> ').concat(s.milepoint||"N/A",'</p>\n            <p style="margin: 0 0 3px;"><strong>Message:</strong> ').concat(s.message1||""," ").concat(s.message2||""," ").concat(s.message3||"",'</p>\n            <p style="margin: 0 0 3px;"><strong>On Time:</strong> ').concat(s.ontime||"N/A",'</p>\n            <p style="margin: 0 0 3px;"><strong>Off Time:</strong> ').concat(s.offtime||"N/A","</p>\n          </div>\n        ")),l=new(eO()).Marker(a).setLngLat([t[0],t[1]]).setPopup(n).addTo(c.current);m.current.push(l)})},[y,u.trafficTimingSystem,c.current]),(0,n.useEffect)(()=>{if(!c.current||!u.dynamicMessageSigns){f.current.forEach(e=>e.remove()),f.current=[];return}f.current.forEach(e=>e.remove()),f.current=[],console.log("Rendering ".concat(w.length," dynamic message signs on the map")),w.forEach(e=>{if(!e.latitude||!e.longitude){console.warn("VSL missing coordinates:",e);return}let t=document.createElement("div");t.className="vsl-marker",t.style.width="30px",t.style.height="30px",t.style.backgroundImage='url("./icons/dms.svg")',t.style.backgroundSize="cover",t.style.backgroundRepeat="no-repeat";let s=new(eO()).Popup({offset:25}).setHTML('\n          <div style="max-width: 250px;">\n            <h3 style="margin: 0 0 5px; font-weight: bold;">Dynamic Message Sign</h3>\n            <p style="margin: 0 0 3px;"><strong>Name:</strong> '.concat(e.name||"N/A",'</p>\n            <p style="margin: 0 0 3px;"><strong>Road:</strong> ').concat(e.primaryRoad||"N/A",'</p>\n            <p style="margin: 0 0 3px;"><strong>Direction:</strong> ').concat(e.direction||"N/A",'</p>\n            <p style="margin: 0 0 3px;"><strong>Mile Marker:</strong> ').concat(e.mileMarker||"N/A",'</p>\n            <p style="margin: 0 0 3px;"><strong>Cross Road:</strong> ').concat(e.crossRoad||"N/A",'</p>\n            <p style="margin: 0 0 3px;"><strong>City:</strong> ').concat(e.city||"N/A",'</p>\n            <p style="margin: 0 0 3px;"><strong>County:</strong> ').concat(e.county||"N/A","</p>\n            ").concat(e.status&&e.status.message?'<p style="margin: 0 0 3px;"><strong>Message:</strong> '.concat(e.status.message,"</p>"):"","\n          </div>\n        ")),a=new(eO()).Marker(t).setLngLat([e.longitude,e.latitude]).setPopup(s).addTo(c.current);f.current.push(a)})},[w,u.dynamicMessageSigns,c.current]);let C=e=>{x({...u,[e]:!u[e]})},E=()=>t.filter(e=>{var t,s,a,n;let l="N/A"!==e.positiveLaneBlockageType&&((null===(t=e.positiveLaneBlockage)||void 0===t?void 0:t.allLanesAffected)||(null===(s=e.positiveLaneBlockage)||void 0===s?void 0:s.lanesAffected)&&e.positiveLaneBlockage.lanesAffected.length>0),i="N/A"!==e.negativeLaneBlockageType&&((null===(a=e.negativeLaneBlockage)||void 0===a?void 0:a.allLanesAffected)||(null===(n=e.negativeLaneBlockage)||void 0===n?void 0:n.lanesAffected)&&e.negativeLaneBlockage.lanesAffected.length>0);return l||i}),R=()=>t.filter(e=>{var t,s,a,n;let l="N/A"!==e.positiveLaneBlockageType&&((null===(t=e.positiveLaneBlockage)||void 0===t?void 0:t.allLanesAffected)||(null===(s=e.positiveLaneBlockage)||void 0===s?void 0:s.lanesAffected)&&e.positiveLaneBlockage.lanesAffected.length>0),i="N/A"!==e.negativeLaneBlockageType&&((null===(a=e.negativeLaneBlockage)||void 0===a?void 0:a.allLanesAffected)||(null===(n=e.negativeLaneBlockage)||void 0===n?void 0:n.lanesAffected)&&e.negativeLaneBlockage.lanesAffected.length>0);return!l&&!i}),T=()=>{let e={positive:{CLOSED:0,SLOW:0,"N/A":0},negative:{CLOSED:0,SLOW:0,"N/A":0},total:0};return E().forEach(t=>{var s,a,n,l;let i="N/A"!==t.positiveLaneBlockageType&&((null===(s=t.positiveLaneBlockage)||void 0===s?void 0:s.allLanesAffected)||(null===(a=t.positiveLaneBlockage)||void 0===a?void 0:a.lanesAffected)&&t.positiveLaneBlockage.lanesAffected.length>0),r="N/A"!==t.negativeLaneBlockageType&&((null===(n=t.negativeLaneBlockage)||void 0===n?void 0:n.allLanesAffected)||(null===(l=t.negativeLaneBlockage)||void 0===l?void 0:l.lanesAffected)&&t.negativeLaneBlockage.lanesAffected.length>0);i&&(e.positive[t.positiveLaneBlockageType]++,e.total++),r&&(e.negative[t.negativeLaneBlockageType]++,e.total++)}),e},[D,I]=(0,n.useState)(!1),[B,F]=(0,n.useState)(!1),[O,P]=(0,n.useState)(!1);return(0,a.jsxs)("div",{className:"relative h-full w-full flex flex-col",children:[(0,a.jsx)("div",{ref:r,className:"h-full w-full flex-grow"}),(0,a.jsx)("div",{className:"absolute top-4 right-4 z-[1000] bg-white p-3 rounded-md shadow-md",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"Map Layers"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(U,{id:"layer-dms",checked:u.dynamicMessageSigns,onCheckedChange:()=>C("dynamicMessageSigns")}),(0,a.jsx)(M,{htmlFor:"layer-dms",children:"Dynamic Message Signs"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(U,{id:"layer-tts",checked:u.trafficTimingSystem,onCheckedChange:()=>C("trafficTimingSystem")}),(0,a.jsx)(M,{htmlFor:"layer-tts",children:"Traffic Timing System"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(U,{id:"layer-rest",checked:u.restArea,onCheckedChange:()=>C("restArea")}),(0,a.jsx)(M,{htmlFor:"layer-rest",children:"Rest Area"})]})]})]})}),t.length>0&&(0,a.jsxs)("div",{className:"absolute top-4 left-4 z-[1000]",children:[(0,a.jsxs)(g,{variant:"outline",size:"sm",className:"bg-white shadow-md flex items-center gap-1.5",onClick:()=>P(!O),children:[(0,a.jsx)(ev.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Legend"})]}),O&&(0,a.jsx)(_,{className:"mt-2 p-3 shadow-lg bg-white/95 backdrop-blur-sm w-[280px]",children:(0,a.jsxs)("div",{className:"space-y-3",children:[l.hasCarEvents&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium mb-2",children:"Car Event Types"}),(0,a.jsx)("div",{className:"space-y-1",children:A.slice(0,-1).map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-4 h-4 rounded-full border border-gray-300",style:{backgroundColor:e.color(1)}}),(0,a.jsx)("span",{className:"text-xs",children:e.name})]},t))}),(0,a.jsxs)("div",{className:"mt-3",children:[(0,a.jsx)("p",{className:"text-sm font-medium mb-2",children:"Priority Levels"}),(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-16 h-3 rounded-sm bg-gradient-to-r from-red-200 to-red-600"}),(0,a.jsx)("span",{className:"text-xs",children:"Priority Scale"})]}),(0,a.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 px-1",children:[(0,a.jsx)("span",{children:"Lower"}),(0,a.jsx)("span",{children:"Higher"})]})]})]})]}),l.hasLaneBlockages&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium mb-2",children:"Lane Blockage Types"}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-4 h-4 border border-gray-300 rotate-45",style:{backgroundColor:"#ff0000"}}),(0,a.jsx)("span",{className:"text-xs",children:"Closed"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-4 h-4 border border-gray-300 rotate-45",style:{backgroundColor:"#ffa500"}}),(0,a.jsx)("span",{className:"text-xs",children:"Slow"})]})]}),(0,a.jsxs)("div",{className:"mt-3",children:[(0,a.jsx)("p",{className:"text-sm font-medium mb-2",children:"Direction"}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-xs w-20",children:"Positive"}),(0,a.jsx)("span",{className:"text-xs",children:"Travel direction"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-xs w-20",children:"Negative"}),(0,a.jsx)("span",{className:"text-xs",children:"Opposite direction"})]})]})]}),(0,a.jsxs)("div",{className:"mt-3",children:[(0,a.jsx)("p",{className:"text-sm font-medium mb-2",children:"Affected Areas"}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-xs w-20",children:"All Lanes"}),(0,a.jsx)("span",{className:"text-xs",children:"All lanes in direction"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-xs w-20",children:"Specific Lanes"}),(0,a.jsx)("span",{className:"text-xs",children:"Only certain lane numbers"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-xs w-20",children:"Shoulders"}),(0,a.jsx)("span",{className:"text-xs",children:"Inside/outside shoulders"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-xs w-20",children:"Ramps"}),(0,a.jsx)("span",{className:"text-xs",children:"Entrance/exit ramps"})]})]})]})]}),l.hasCarEvents&&l.hasLaneBlockages&&(0,a.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[(0,a.jsx)("p",{className:"text-sm font-medium mb-2",children:"Marker Shapes"}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-4 h-4 rounded-full border border-gray-300 bg-gray-400"}),(0,a.jsx)("span",{className:"text-xs",children:"Car Event"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-4 h-4 border border-gray-300 rotate-45 bg-gray-400"}),(0,a.jsx)("span",{className:"text-xs",children:"Lane Blockage"})]})]})]})]})})]}),(0,a.jsxs)("div",{className:"absolute bottom-4 left-4 right-4 z-[1000] flex flex-col gap-3",children:[l.hasCarEvents&&R().length>0&&(0,a.jsx)("div",{className:"transition-all duration-300 ".concat(D?"max-h-[50vh]":"max-h-[60px]"," overflow-hidden"),children:(0,a.jsxs)(_,{className:"p-3 shadow-lg bg-white/95 backdrop-blur-sm border-t-4 border-blue-500",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center cursor-pointer",onClick:()=>I(!D),children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-lg font-semibold",children:"Car Events Results"}),(0,a.jsxs)("span",{className:"bg-blue-100 text-blue-800 text-xs font-medium px-2.5 py-0.5 rounded-full",children:[R().length," ",1===R().length?"event":"events"]})]}),(0,a.jsx)(g,{variant:"ghost",size:"sm",className:"p-1 h-auto",children:D?(0,a.jsx)(N.A,{className:"h-5 w-5"}):(0,a.jsx)(j.A,{className:"h-5 w-5"})})]}),D&&(0,a.jsxs)("div",{className:"mt-4 space-y-4 overflow-y-auto max-h-[calc(50vh-60px)]",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-medium mb-2",children:"Event Types"}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:Object.entries((()=>{let e={};return t.forEach(t=>{e[t.eventType]=(e[t.eventType]||0)+1}),e})()).map(e=>{let[t,s]=e;return(0,a.jsxs)("div",{className:"flex justify-between items-center bg-gray-50 p-2 rounded-md",children:[(0,a.jsx)("span",{className:"text-sm truncate",children:t}),(0,a.jsx)("span",{className:"text-xs font-medium bg-blue-100 text-blue-800 px-2 py-0.5 rounded-full",children:s})]},t)})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-medium mb-2",children:"Priority Levels"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:Object.entries((()=>{let e={};return t.forEach(t=>{e[t.priorityLevel]=(e[t.priorityLevel]||0)+1}),e})()).sort((e,t)=>Number(e[0])-Number(t[0])).map(e=>{let[t,s]=e;return(0,a.jsxs)("div",{className:"flex items-center gap-1 bg-gray-50 px-3 py-1 rounded-full",children:[(0,a.jsxs)("span",{className:"text-sm",children:["Priority ",t]}),(0,a.jsx)("span",{className:"text-xs font-medium bg-blue-100 text-blue-800 px-2 py-0.5 rounded-full",children:s})]},t)})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-medium mb-2",children:"Top Locations"}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:Object.entries((()=>{let e={};return t.forEach(t=>{t.locationDetails.city&&t.locationDetails.city.length>0?t.locationDetails.city.forEach(t=>{e[t]=(e[t]||0)+1}):e.Unspecified=(e.Unspecified||0)+1}),e})()).sort((e,t)=>t[1]-e[1]).slice(0,9).map(e=>{let[t,s]=e;return(0,a.jsxs)("div",{className:"flex justify-between items-center bg-gray-50 p-2 rounded-md",children:[(0,a.jsx)("span",{className:"text-sm truncate",children:t}),(0,a.jsx)("span",{className:"text-xs font-medium bg-blue-100 text-blue-800 px-2 py-0.5 rounded-full",children:s})]},t)})})]})]})]})}),l.hasLaneBlockages&&E().length>0&&(0,a.jsx)("div",{className:"transition-all duration-300 ".concat(B?"max-h-[50vh]":"max-h-[60px]"," overflow-hidden"),children:(0,a.jsxs)(_,{className:"p-3 shadow-lg bg-white/95 backdrop-blur-sm border-t-4 border-orange-500",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center cursor-pointer",onClick:()=>F(!B),children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-lg font-semibold",children:"Lane Blockage Results"}),(0,a.jsxs)("span",{className:"bg-orange-100 text-orange-800 text-xs font-medium px-2.5 py-0.5 rounded-full",children:[E().length," ",1===E().length?"event":"events"]})]}),(0,a.jsx)(g,{variant:"ghost",size:"sm",className:"p-1 h-auto",children:B?(0,a.jsx)(N.A,{className:"h-5 w-5"}):(0,a.jsx)(j.A,{className:"h-5 w-5"})})]}),B&&(0,a.jsxs)("div",{className:"mt-4 space-y-4 overflow-y-auto max-h-[calc(50vh-60px)]",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-medium mb-2",children:"Lane Blockage Types"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-xs font-medium mb-1",children:"Positive Direction"}),(0,a.jsx)("div",{className:"space-y-1",children:Object.entries(T().positive).filter(e=>{let[t,s]=e;return"N/A"!==t&&s>0}).map(e=>{let[t,s]=e;return(0,a.jsxs)("div",{className:"flex justify-between items-center bg-gray-50 p-2 rounded-md",children:[(0,a.jsx)("span",{className:"text-sm truncate",children:t}),(0,a.jsx)("span",{className:"text-xs font-medium bg-orange-100 text-orange-800 px-2 py-0.5 rounded-full",children:s})]},"pos-".concat(t))})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-xs font-medium mb-1",children:"Negative Direction"}),(0,a.jsx)("div",{className:"space-y-1",children:Object.entries(T().negative).filter(e=>{let[t,s]=e;return"N/A"!==t&&s>0}).map(e=>{let[t,s]=e;return(0,a.jsxs)("div",{className:"flex justify-between items-center bg-gray-50 p-2 rounded-md",children:[(0,a.jsx)("span",{className:"text-sm truncate",children:t}),(0,a.jsx)("span",{className:"text-xs font-medium bg-orange-100 text-orange-800 px-2 py-0.5 rounded-full",children:s})]},"neg-".concat(t))})})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-medium mb-2",children:"Affected Routes"}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:E().reduce((e,t)=>(t.route&&!e.includes(t.route)&&e.push(t.route),e),[]).map(e=>(0,a.jsx)("div",{className:"flex items-center bg-gray-50 p-2 rounded-md",children:(0,a.jsx)("span",{className:"text-sm truncate",children:e})},e))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-medium mb-2",children:"Top Locations"}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:E().reduce((e,t)=>(t.locationDetails.city&&t.locationDetails.city.forEach(t=>{let s=e.find(e=>e.name===t);s?s.count++:e.push({name:t,count:1})}),e),[]).sort((e,t)=>t.count-e.count).slice(0,9).map(e=>(0,a.jsxs)("div",{className:"flex justify-between items-center bg-gray-50 p-2 rounded-md",children:[(0,a.jsx)("span",{className:"text-sm truncate",children:e.name}),(0,a.jsx)("span",{className:"text-xs font-medium bg-orange-100 text-orange-800 px-2 py-0.5 rounded-full",children:e.count})]},e.name))})]})]})]})})]})]})}s(8689),eO().accessToken="pk.eyJ1IjoidGFuYXkyayIsImEiOiJjbTJpYnltejYwbDgwMmpvbm1lNG16enV3In0.fwcdZ3I-cofnDOR9m1Hqng";var eP=s(7364);function ez(e){let{title:t,onBack:s}=e;return(0,a.jsx)("div",{className:"flex flex-col items-center justify-center h-full bg-gray-50 p-8",children:(0,a.jsxs)("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-8 text-center",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-4 text-gray-800",children:t}),(0,a.jsx)("p",{className:"text-lg text-gray-600 mb-8",children:"This feature is coming soon!"}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsxs)(g,{onClick:s,className:"flex items-center gap-2",children:[(0,a.jsx)(eP.A,{className:"h-4 w-4"}),"Back to Map View"]})})]})})}var eH=s(7530),eU=s(1779);let eV=e=>{let{className:t,...s}=e;return(0,a.jsx)(eU.YZ,{className:u("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",t),...s})},eW=eU.Zk,eY=e=>{let{withHandle:t,className:s,...n}=e;return(0,a.jsx)(eU.TW,{className:u("relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90",s),...n,children:t&&(0,a.jsx)("div",{className:"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border",children:(0,a.jsx)(eH.A,{className:"h-2.5 w-2.5"})})})};function eG(){let[e,t]=(0,n.useState)("map"),[s,l]=(0,n.useState)([]),[i,r]=(0,n.useState)({carEvents:[],laneBlockages:{blockType:[],allLanesAffected:[],lanesAffected:{positive:[],negative:[]},additionalFilters:{negative_exit_ramp_affected:[],negative_entrance_ramp_affected:[],positive_exit_ramp_affected:[],positive_entrance_ramp_affected:[],negative_inside_shoulder_affected:[],negative_outside_shoulder_affected:[],positive_inside_shoulder_affected:[],positive_outside_shoulder_affected:[]}}}),c=e=>{t(e)};return(0,a.jsxs)("div",{className:"flex flex-col h-screen w-full overflow-hidden",children:[(0,a.jsx)(p,{activeView:e,onViewChange:c}),(0,a.jsxs)("div",{className:"flex-1 overflow-hidden",children:["map"===e&&(0,a.jsxs)(eV,{direction:"horizontal",children:[(0,a.jsx)(eW,{defaultSize:30,minSize:15,collapsible:!0,collapsedSize:15,children:(0,a.jsx)(eB,{onFilteredDataChange:l,onSelectedDatasetsChange:r})}),(0,a.jsx)(eY,{withHandle:!0}),(0,a.jsx)(eW,{defaultSize:70,children:(0,a.jsx)(eM,{carEvents:s,selectedDatasets:i})})]}),"chart"===e&&(0,a.jsx)(ez,{title:"Chart View",onBack:()=>c("map")}),"data"===e&&(0,a.jsx)(ez,{title:"Data Catalog",onBack:()=>c("map")}),"settings"===e&&(0,a.jsx)(ez,{title:"Settings",onBack:()=>c("map")}),"guide"===e&&(0,a.jsx)(ez,{title:"User Guide",onBack:()=>c("map")})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[237,240,744,441,517,358],()=>t(6840)),_N_E=e.O()}]);